<?php if(!empty($_POST['link'])&&!empty($_POST['short'])){$link=$_POST["link"];if(strpos($link,"http://")!==0||strpos($link,"https://")!==0){if(filter_var($link,FILTER_VALIDATE_URL)){$short=$_POST["short"];if(file_exists($short)){echo "<h1 style='text-align:center;'>short link already exist</h1>";}else{mkdir($short,0777,true);$myfile=fopen($short."/index.php","w")or die("failed");$txt='<?php header("Location: '.$link.'");?>';fwrite($myfile,$txt);fclose($myfile);echo '<style>input{margin-top:30vh; width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; resize: vertical;}</style><h1 style="text-align:center;"><input type="text" value="http://'.$_SERVER['HTTP_HOST']."/".$short.'" id="myInput"><button onclick="myFunction()">Copy text</button></h1><script>function myFunction(){var copyText=document.getElementById("myInput"); copyText.select(); copyText.setSelectionRange(0, 99999) document.execCommand("copy");}</script>';}}else{echo "it is not a link";}}else{echo "it is not a valid link";}}else{echo '<!DOCTYPE html> <html> <head> <style>*{box-sizing: border-box;}input[type=text], select, textarea{width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; resize: vertical;}label{padding: 12px 12px 12px 0; display: inline-block;}input[type=submit]{background-color: #4CAF50; color: white; padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; float: right;}input[type=submit]:hover{background-color: #45a049;}.container{margin-top:30vh; border-radius: 5px; background-color: #f2f2f2; padding: 20px;}.col-25{float: left; width: 25%; margin-top: 6px;}.col-75{float: left; width: 75%; margin-top: 6px;}/* Clear floats after the columns */ .row:after{content: ""; display: table; clear: both;}/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */ @media screen and (max-width: 600px){.col-25, .col-75, input[type=submit]{width: 100%; margin-top: 0;}}</style> </head> <body> <div class="container"> <form action="#" method="post"> <div class="row"> <div class="col-25"> <label for="fname">Long link</label> </div><div class="col-75"> <input type="text" id="fname" name="link" > </div></div><div class="row"> <div class="col-25"> <label for="lname">Short link</label> </div><div class="col-75"> <input type="text" id="lname" name="short" > </div></div><div class="row"> <input type="submit" value="Submit"> </div></form> </div></body> </html>';}?>